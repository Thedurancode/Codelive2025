@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Instrument+Sans:ital,wght@0,400..700;1,400..700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Modern grayscale palette */
    --sb-core-0: 0 0% 100%;
    --sb-core-10: 240 20% 99%;
    --sb-core-20: 240 10% 94%;
    --sb-core-30: 240 7% 84%;
    --sb-core-40: 240 6% 74%;
    --sb-core-50: 240 5% 65%;
    --sb-core-60: 240 4% 57%;
    --sb-core-70: 240 4% 48%;
    --sb-core-80: 240 5% 34%;
    --sb-core-90: 240 5% 26%;
    --sb-core-100: 240 4% 22%;
    --sb-core-110: 240 4% 19%;
    --sb-core-120: 240 4% 16%;
    --sb-core-130: 240 4% 13%;
    --sb-core-140: 240 5% 10%;
    --sb-core-150: 240 5% 8%;
    --sb-core-160: 240 6% 4%;

    /* Modern accent colors */
    --sb-yellow-10: 45 100% 96%;
    --sb-yellow-20: 45 100% 90%;
    --sb-yellow-30: 45 97% 85%;
    --sb-yellow-40: 45 96% 75%;
    --sb-yellow-50: 45 95% 65%;
    --sb-yellow-60: 45 76% 55%;
    --sb-yellow-70: 45 31% 45%;
    --sb-yellow-80: 45 28% 35%;

    --sb-red-10: 358 100% 96%;
    --sb-red-20: 358 100% 90%;
    --sb-red-30: 358 85% 80%;
    --sb-red-40: 358 85% 70%;
    --sb-red-50: 358 75% 59%;
    --sb-red-60: 358 75% 49%;
    --sb-red-70: 358 74% 39%;
    --sb-red-80: 358 82% 29%;

    --sb-blue-10: 210 100% 96%;
    --sb-blue-20: 210 100% 90%;
    --sb-blue-30: 210 100% 80%;
    --sb-blue-40: 210 100% 70%;
    --sb-blue-50: 210 100% 60%;
    --sb-blue-60: 210 100% 50%;
    --sb-blue-70: 210 100% 40%;
    --sb-blue-80: 210 100% 30%;

    --sb-purple-10: 270 100% 96%;
    --sb-purple-20: 270 90% 90%;
    --sb-purple-60: 270 80% 60%;
    --sb-purple-70: 270 70% 50%;
    --sb-purple-80: 270 60% 40%;

    --sb-green-20: 142 76% 90%;
    --sb-green-80: 142 76% 30%;
  }

  /* Modern dark theme */
  :root {
    --background: 240 5% 9%;
    --foreground: 0 0% 98%;
    --card: 240 4% 12%;
    --card-foreground: 0 0% 98%;
    --popover: 240 4% 12%;
    --popover-foreground: 0 0% 98%;
    --primary: 210 100% 50%;
    --primary-foreground: 0 0% 98%;
    --secondary: 240 4% 16%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 4% 16%;
    --muted-foreground: 240 5% 65%;
    --accent: 210 100% 50%;
    --accent-foreground: 0 0% 98%;
    --destructive: 358 75% 59%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 4% 16%;
    --input: 240 4% 16%;
    --ring: 240 5% 65%;

    --primary-hover: 210 100% 55%;
    --secondary-hover: 240 4% 20%;
    --tertiary: 240 4% 13%;
    --tertiary-foreground: 240 5% 65%;
    --ai: var(--sb-blue-60);
    --ai-btn: var(--sb-blue-70);
    --ai-ring: var(--sb-blue-70);
    --ai-foreground: var(--sb-blue-10);
    --ai-border: var(--sb-blue-20);
    --run: 45 95% 65%;
    --run-foreground: 240 4% 22%;
    --run-ring: 45 95% 65%;
    --inline-code: 240 4% 16%;
    --inline-code-foreground: var(--foreground);
    --error: 358 75% 59%;
    --error-foreground: 358 82% 29%;
    --error-background-subtle: hsl(358 75% 59% / 0.1);
    --warning: 45 100% 90%;
    --warning-foreground: 45 28% 35%;
    --warning-background-subtle: hsl(45 95% 65% / 0.1);
  }

  .dark {
    --primary-hover: var(--sb-core-30);
    --secondary-hover: var(--sb-core-30);
    --tertiary: var(--sb-core-130);
    --tertiary-foreground: var(--sb-core-60);
    --ai: var(--sb-core-150);
    --ai-foreground: var(--sb-blue-10);
    --ai-border: var(--sb-core-140);
    --run: var(--sb-yellow-50);
    --run-foreground: var(--sb-core-100);
    --run-ring: var(--sb-yellow-50);
    --inline-code: var(--sb-core-110);
    --inline-code-foreground: var(--foreground);
    --error: var(--sb-red-30);
    --error-foreground: var(--sb-red-80);
    --error-background-subtle: hsl(var(--sb-red-40) / 0.1);
    --warning: var(--sb-yellow-20);
    --warning-foreground: var(--sb-yellow-80);
    --warning-background-subtle: hsl(var(--sb-yellow-50) / 0.1);
  }

  /* shadcn variables dark */
  :root {
    --background: 0 0% 0%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 3%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 3%;
    --muted-foreground: 0 0% 63.9%;
    --accent: var(--sb-blue-60);
    --accent-foreground: 0 0% 98%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;
  }

  .dark {
    --background: 0 0% 0%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 3%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 3%;
    --muted-foreground: 0 0% 63.9%;
    --accent: var(--sb-blue-60);
    --accent-foreground: 0 0% 98%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;
  }
}

@layer components {
  .title {
    font-size: 2rem;
    line-height: 1;
    font-weight: 500;
  }

  .h1 {
    font-size: 1.875rem;
    line-height: 2.375rem;
    font-weight: 500;
  }

  .h2 {
    font-size: 1.5rem;
    line-height: 2rem;
    font-weight: 500;
  }

  .h3 {
    font-size: 1.25rem;
    line-height: 1.875rem;
    font-weight: 500;
  }

  .h4 {
    font-size: 1.125rem;
    line-height: 1.75rem;
    font-weight: 500;
  }

  .h5 {
    font-size: 1rem;
    line-height: 1.5rem;
    font-weight: 500;
  }

  .p {
    font-size: 1rem;
    line-height: 1.5rem;
    font-weight: 300;
  }

  .code {
    @apply text-sm;
    @apply rounded-sm;
    @apply px-1;
    @apply py-0.5;
    @apply mx-0.5;
    @apply bg-muted;
    @apply text-inline-code-foreground;
  }

  .code-mini {
    @apply text-xs;
    @apply rounded-sm;
    @apply px-0.5;
    @apply bg-muted;
    @apply text-inline-code-foreground;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    min-height: 100vh;
  }

  /* Modern scrollbar styling */
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  ::-webkit-scrollbar-track {
    background: hsl(240 4% 12%);
  }

  ::-webkit-scrollbar-thumb {
    background: hsl(240 4% 16%);
    border-radius: 5px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: hsl(240 4% 20%);
  }
}

.sb-prose {
  @apply font-sans;
  @apply text-base;
  @apply leading-7;
}

.sb-prose > *:first-child {
  margin-top: 0;
}

.sb-prose > *:last-child {
  margin-bottom: 0;
}

.sb-prose p {
  @apply my-3;
}

.sb-prose a {
  font-weight: bold;
  @apply underline;
  @apply decoration-2;
  @apply underline-offset-2;
}

.sb-prose a:hover {
  @apply text-primary-hover;
}

.sb-prose blockquote {
  @apply font-semibold;
  @apply my-5;
  @apply italic;
  @apply text-tertiary-foreground;
  @apply ps-5;
  @apply border-s-4;
  @apply border-s-border;
  quotes: '\201C' '\201D' '\2018' '\2019';
}

.sb-prose blockquote p:first-of-type::before {
  content: open-quote;
}

.sb-prose blockquote p:last-of-type::after {
  content: close-quote;
}

.sb-prose pre {
  @apply overflow-x-auto;
  @apply bg-muted;
  @apply text-foreground;
  @apply text-base;
  @apply p-4;
  @apply rounded-sm;
  @apply my-4;
}

.sb-prose code:not(pre code) {
  @apply code;
}

.sb-prose h1 > code,
.sb-prose h2 > code,
.sb-prose h3 > code,
.sb-prose h4 > code,
.sb-prose h5 > code {
  @apply font-mono;
  /* No way to avoid !important given specificity priority and the fact that we don't generate the HTML */
  font-size: 80% !important;
  @apply px-1.5 !important;
  @apply font-normal;
}

.sb-prose h1 {
  @apply h1;
  @apply my-5;
}

.sb-prose h2 {
  @apply h2;
  @apply my-5;
}

.sb-prose h3 {
  @apply h3;
  @apply my-4;
}

.sb-prose h4 {
  @apply h4;
  @apply my-3;
}

.sb-prose h5 {
  @apply h5;
  @apply my-3;
}

.sb-prose hr {
  @apply my-5;
}

.sb-prose ol {
  @apply list-decimal;
  @apply ps-6;
  margin: 1.15em 0;
}

.sb-prose ol > li:marker {
  @apply font-normal;
}

.sb-prose ul {
  @apply list-disc;
  @apply ps-6;
  margin: 1.15em 0;
}

.sb-prose li {
  margin: 5px 0;
}

.sb-prose ol > li {
  @apply ps-1.5;
  @apply my-1;
}

.sb-prose ul > li {
  @apply ps-1.5;
  @apply my-1;
}

.sb-prose img {
  border-radius: 3px;
}

.sb-prose-mini {
  @apply font-sans;
  @apply text-xs;
  @apply leading-3;
}

.sb-prose-mini > *:first-child {
  margin-top: 0;
}

.sb-prose-mini > *:last-child {
  margin-bottom: 0;
}

.sb-prose-mini p {
  @apply my-1;
}

.sb-prose-mini a {
  font-weight: 50;
  @apply underline;
  @apply decoration-1;
  @apply underline-offset-1;
}

.sb-prose-mini a:hover {
  @apply text-primary-hover;
}

.sb-prose-mini blockquote {
  @apply font-semibold;
  @apply my-3;
  @apply italic;
  @apply text-tertiary-foreground;
  @apply ps-2;
  @apply border-s-2;
  @apply border-s-border;
  quotes: '\201C' '\201D' '\2018' '\2019';
}

.sb-prose-mini blockquote p:first-of-type::before {
  content: open-quote;
}

.sb-prose-mini blockquote p:last-of-type::after {
  content: close-quote;
}

.sb-prose-mini pre {
  @apply text-xs;
  @apply overflow-x-auto;
  @apply bg-muted;
  @apply text-foreground;
  @apply p-2;
  @apply rounded-sm;
  @apply border;
  @apply border-border;
}

.sb-prose-mini code:not(pre code) {
  @apply code-mini;
}

.sb-prose-mini h1 > code,
.sb-prose-mini h2 > code,
.sb-prose-mini h3 > code,
.sb-prose-mini h4 > code,
.sb-prose-mini h5 > code {
  @apply font-mono;
  /* No way to avoid !important given specificity priority and the fact that we don't generate the HTML */
  font-size: 80% !important;
  @apply px-1.5 !important;
  @apply font-normal;
}

.sb-prose-mini h1 {
  @apply text-xl;
  @apply my-2;
}

.sb-prose-mini h2 {
  @apply text-lg;
  @apply my-2;
}

.sb-prose-mini h3 {
  @apply text-lg;
  @apply my-2;
}

.sb-prose-mini h4 {
  @apply text-sm;
  @apply my-1;
}

.sb-prose-mini h5 {
  @apply text-sm;
  @apply my-1;
}

.sb-prose-mini hr {
  @apply my-2;
}

.sb-prose-mini ol {
  @apply list-decimal;
  @apply ps-2;
  margin: 1.15em 0;
}

.sb-prose-mini ol > li:marker {
  @apply font-normal;
}

.sb-prose-mini ul {
  @apply list-disc;
  @apply ps-2;
  margin: 0.75em 0;
}

.sb-prose-mini li {
  margin: 3px 0;
}

.sb-prose-mini ol > li {
  @apply ps-1.5;
  @apply my-1;
}

.sb-prose-mini ul > li {
  @apply ps-1.5;
  @apply my-1;
}

.sb-prose-mini img {
  border-radius: 1.5px;
}

.sb-prose-chat {
  @apply font-sans;
  @apply text-sm;
  @apply leading-5;
}

.sb-prose-chat > *:first-child {
  margin-top: 0;
}

.sb-prose-chat > *:last-child {
  margin-bottom: 0;
}

.sb-prose-chat p {
  @apply my-2;
}

.sb-prose-chat a {
  font-weight: bold;
  @apply underline;
  @apply decoration-2;
  @apply underline-offset-2;
}

.sb-prose-chat a:hover {
  @apply text-primary-hover;
}

.sb-prose-chat blockquote {
  @apply font-medium;
  @apply my-3;
  @apply italic;
  @apply text-tertiary-foreground;
  @apply ps-4;
  @apply border-s-2;
  @apply border-s-border;
  quotes: '\201C' '\201D' '\2018' '\2019';
}

.sb-prose-chat blockquote p:first-of-type::before {
  content: open-quote;
}

.sb-prose-chat blockquote p:last-of-type::after {
  content: close-quote;
}

.sb-prose-chat pre {
  @apply overflow-x-auto;
  @apply bg-muted;
  @apply text-foreground;
  @apply p-3;
  @apply rounded-sm;
  @apply my-3;
}

.sb-prose-chat code:not(pre code) {
  @apply text-sm;
  @apply rounded-sm;
  @apply px-1;
  @apply py-0.5;
  @apply mx-0.5;
  @apply bg-muted;
  @apply text-inline-code-foreground;
}

.sb-prose-chat h1 > code,
.sb-prose-chat h2 > code,
.sb-prose-chat h3 > code,
.sb-prose-chat h4 > code,
.sb-prose-chat h5 > code {
  @apply font-mono;
  /* No way to avoid !important given specificity priority and the fact that we don't generate the HTML */
  font-size: 80% !important;
  @apply px-1.5 !important;
  @apply font-normal;
}

.sb-prose-chat h1 {
  font-size: 1.5rem;
  line-height: 2rem;
  font-weight: 500;
  @apply my-3;
}

.sb-prose-chat h2 {
  font-size: 1.25rem;
  line-height: 1.75rem;
  font-weight: 500;
  @apply my-3;
}

.sb-prose-chat h3 {
  font-size: 1.1rem;
  line-height: 1.675rem;
  font-weight: 500;
  @apply my-2;
}

.sb-prose-chat h4 {
  font-size: 1rem;
  line-height: 1.5rem;
  font-weight: 500;
  @apply my-2;
}

.sb-prose-chat h5 {
  font-size: 0.9rem;
  line-height: 1.4rem;
  font-weight: 500;
  @apply my-2;
}

.sb-prose-chat hr {
  @apply my-3;
}

.sb-prose-chat ol {
  @apply list-decimal;
  @apply ps-6;
  margin: 1em 0;
}

.sb-prose-chat ol > li:marker {
  @apply font-normal;
}

.sb-prose-chat ul {
  @apply list-disc;
  @apply ps-6;
  margin: 1em 0;
}

.sb-prose-chat li {
  margin: 3px 0;
}

.sb-prose-chat ol > li {
  @apply ps-1.5;
  @apply my-1;
}

.sb-prose-chat ul > li {
  @apply ps-1.5;
  @apply my-1;
}

.sb-prose-chat img {
  border-radius: 3px;
}

.cm-editor {
  @apply h-full;
  @apply rounded-b;
  @apply text-sm;
  @apply overflow-auto;
}

.cm-editor.cm-focused {
  outline: none;
  border: none;
}

.cm-editor .cm-gutters {
  @apply rounded-bl;
  @apply bg-background;
}

.cm-editor .cm-gutters .cm-gutterElement {
  @apply px-1.5;
  padding-top: 1px;
  font-size: 12px;
  min-width: 2rem;
}

.cm-editor .cm-gutters .cm-activeLineGutter {
  background-color: transparent;
}

.cm-editor .cm-scroller {
  overflow: auto;
  height: 100%;
}

.cm-editor .cm-gutters,
.cm-editor .cm-content {
  min-height: '100px';
}

.cm-editor del {
  text-decoration: none;
}

.cm-editor .cm-deletedChunk {
  background-color: rgba(248, 81, 73, 0.15);
}

.cm-editor.cm-merge-a .cm-changedLine,
.cm-editor.cm-merge-b .cm-changedLine {
  background-color: rgba(46, 160, 67, 0.15);
}

.cm-editor * {
  font-family: 'IBM Plex Mono', ui-monospace, 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas',
    'Liberation Mono', 'Courier New', 'monospace';
}

.cm-tooltip {
  @apply overflow-hidden;
  @apply !bg-background;
  @apply border;
  @apply shadow-md;
  @apply !border-border;
}

.cm-tooltip-autocomplete {
  @apply overflow-hidden;
  @apply !bg-background;
  @apply border;
  @apply shadow-md;
  @apply !border-border;
}

.cm-tooltip.cm-tooltip-autocomplete ul {
  font-family: 'IBM Plex Mono', ui-monospace, 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas',
    'Liberation Mono', 'Courier New', 'monospace';
}

.cm-tooltip.cm-tooltip-autocomplete ul li.custom-class {
  @apply !bg-muted;
  @apply !text-foreground;
  font-style: normal;
}

.cm-diagnostic {
  @apply ml-0;
  @apply !p-0;
}

.cm-tooltip-section:not(:first-child) {
  @apply !border-t-0;
}
